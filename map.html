<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Upside Down</title>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/style.css" />
</head>
<body>

<div id="page">

  <!-- ── TOP BAND ── -->
  <div id="top-band">
    <div class="title-group">
      <h1 id="city-title">Upside Down<span class="search-hint" aria-hidden="true">&#x2315;</span></h1>
      <div id="geocoder" class="geocoder">
        <input id="geocoder-input" type="text" placeholder="Search a place..." autocomplete="off" spellcheck="false" />
        <div id="geocoder-results" class="geocoder-results"></div>
      </div>
      <span class="subtitle">an exercise in unlearning north</span>
    </div>
    <div id="manifesto">
      <p>"North is not a fact. It is a decision. Every map is a portrait of power disguised as geography."</p>
    </div>
    <div id="coords">
      <span id="coords-lat">51.51° N</span>
      <span class="coord-sep">/</span>
      <span id="coords-lon">0.13° W</span>
      <span class="coord-sep">/</span>
      <span id="coords-zoom">z11.0</span>
    </div>
  </div>

  <!-- ── MAP FRAME ── -->
  <div id="map-frame">
    <div id="map"></div>

    <!-- ── Flip toast ── -->
    <div id="flip-toast"></div>

    <!-- ── Typewriter search hint ── -->
    <div id="search-typewriter"><span id="typewriter-text"></span></div>

    <!-- ── Flip hint (desktop) ── -->
    <div id="flip-hint">
      <kbd>&uarr;</kbd>
      <span>normal</span>
      <span class="coord-sep">&middot;</span>
      <kbd>&darr;</kbd>
      <span>upside down</span>
      <span class="coord-sep">&middot;</span>
      <kbd>&rarr;</kbd>
      <span>mirror</span>
    </div>

    <!-- ── Touch controls (mobile) — two flip buttons ── -->
    <div class="touch-controls" id="touch-controls">
      <button class="flip-btn" data-orient="upside-down" aria-label="Upside down">
        <span class="flip-btn-arrow">&#8595;</span>
      </button>
      <button class="flip-btn" data-orient="normal" aria-label="Normal orientation">
        <span class="flip-btn-arrow">&#8593;</span>
      </button>
    </div>
  </div>

  <!-- ── BOTTOM BAND ── -->
  <div id="bot-band">

    <!-- Scale block: north arrow + scale bar + ratio -->
    <div class="scale-block">
      <div class="north-arrow" id="north-arrow">
        <svg width="38" height="38" viewBox="0 0 60 60">
          <line x1="30" y1="0" x2="30" y2="60" stroke="#E87461" stroke-width="0.6"/>
          <line x1="0" y1="30" x2="60" y2="30" stroke="#E87461" stroke-width="0.6"/>
          <circle cx="30" cy="30" r="24" fill="none" stroke="#E87461" stroke-width="1.8"/>
          <circle cx="30" cy="30" r="20" fill="none" stroke="#E87461" stroke-width="0.6"/>
          <!-- Pointer direction changes with flip state -->
          <rect class="north-pointer" x="27" y="30" width="6" height="24" fill="#E87461"/>
          <text class="north-label" x="30" y="64" text-anchor="middle" font-family="Space Mono,monospace" font-size="7" font-weight="700" fill="#E87461">N</text>
        </svg>
      </div>
      <div class="scale-wrapper">
        <svg id="scale-svg"></svg>
      </div>
      <span class="scale-ratio" id="scale-ratio"></span>
    </div>

    <!-- Legend -->
    <div class="legend-block">
      <div class="legend-title">Risograph Palette &middot; Legend</div>
      <div class="legend-row">
        <div class="leg-item">
          <svg viewBox="0 0 14 14"><rect x="1" y="1" width="12" height="12" rx="1" fill="#EDE8E0" stroke="#C4BAA8" stroke-width="0.8"/></svg>
          <span>Land</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14"><rect x="1" y="1" width="12" height="12" rx="1" fill="#9B8E7E" stroke="#8B7D6B" stroke-width="0.8"/></svg>
          <span>Water</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14"><rect x="1" y="1" width="12" height="12" rx="1" fill="#9EC4D4" stroke="#7BAFC2" stroke-width="0.8" opacity="0.7"/></svg>
          <span>Buildings</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14"><rect x="1" y="1" width="12" height="12" rx="1" fill="#E87461" stroke="#D06050" stroke-width="0.8" opacity="0.8"/></svg>
          <span>Parks &middot; Green</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14">
            <line x1="2" y1="7" x2="12" y2="7" stroke="#1A1A2E" stroke-width="2"/>
            <line x1="2" y1="10" x2="12" y2="10" stroke="#6E6E80" stroke-width="1"/>
          </svg>
          <span>Roads</span>
        </div>
        <div class="leg-item">
          <svg viewBox="0 0 14 14">
            <line x1="2" y1="7" x2="12" y2="7" stroke="#C9A0A0" stroke-width="1.2" stroke-dasharray="2,1.5"/>
          </svg>
          <span>Boundaries</span>
        </div>
      </div>
    </div>

    <!-- Source -->
    <div class="source-text">
      South-up Mercator projection<br>
      Protomaps &middot; OpenStreetMap
    </div>

    <!-- Links -->
    <div class="bot-links">
      <a href="/" class="bot-link">Read the story</a>
      <a href="https://www.linkedin.com/in/gerardoezequielmc/" target="_blank" rel="noopener" class="bot-link">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        LinkedIn
      </a>
    </div>
  </div>

</div>

<script type="module" src="/src/main.ts"></script>
</body>
</html>
